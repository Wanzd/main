<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pd.it.app.person.dao.IPersonRelationDao">
	<select id="ra" resultType="VO">
select t2.name "fromPerson",
	t3.name "toPerson",
	t1.rel_tag "relTag"
from app_person_rel_t t1
left join app_person_t t2
	on t1.from_id=t2.id
left join app_person_t t3
	on t1.to_id =t3.id
		<include refid="sql$ra$filter"/>
	</select>
	
	<sql id="sql$ra$filter">
		<where>
			<if test='name!=null'>
				and t2.name like concat(#{name},'%')
			</if>
		</where>
	</sql>
</mapper>  