<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pd.it.app.sari.dao.IAppSariCityDao">
	<update id="updateList">
declare
begin
		<foreach item="it" collection="list" >
	insert into app_sari_city_t(
		province,
		city,
		qty_type,
		qty,
		creation_date
	)
	values
	(
		#{it.province,jdbcType=VARCHAR},
		#{it.city,jdbcType=VARCHAR},
		#{it.qtyType,jdbcType=VARCHAR},
		#{it.qty,jdbcType=INTEGER},
		trunc(#{it.creationDate,jdbcType=DATE})
	);
		</foreach>
	commit;
end;
	</update>
	
	<update id="truncate">
truncate table app_sari_city_t
	</update>
	<update id="delete">
		<choose>
			<when test='fo.creationDate!=null'> 
delete from app_sari_city_t
where creation_date=trunc(#{fo.creationDate,jdbcType=DATE})
			</when>
			<otherwise>
truncate table app_sari_city_t
			</otherwise>
		</choose>
	</update>
	
	<select id="queryCombo" resultType="com.pd.base.model.MapVO">
select distinct city "id",
	city "text"
from app_sari_city_t
where 1=0
		<choose>
			<when test='province!=null and province!=""'> or province=#{province,jdbcType=VARCHAR}</when>
			<otherwise></otherwise>
		</choose>
order by nlssort(city,'NLS_SORT=SCHINESE_PINYIN_M')
	</select>
</mapper>  